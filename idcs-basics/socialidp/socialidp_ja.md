# インスタンスへのデータのロード

## 概要

アイデンティティ・アサーション・プロバイダと呼ばれるアイデンティティ・プロバイダは、Oracle Identity Cloud Serviceの外部にあるWebサイトを使用してOracle Identity Cloud Serviceと相互作用するユーザーの識別子を提供します。サービス・プロバイダは、アプリケーションをホストするOracle Identity Cloud ServiceなどのWebサイトです。アイデンティティ・プロバイダを有効にし、1つ以上のサービス・プロバイダを定義できます。ユーザーは、アイデンティティ・プロバイダから直接、サービス・プロバイダによってホストされるアプリケーションにアクセスできます。

Oracle Identity Cloud Service (IDCS)はソーシャル・アイデンティティ・プロバイダをサポートしているため、ユーザーはソーシャル資格証明を使用してIDCSにログインできます。ソーシャル・ログイン機能を使用すると、ユーザーがアカウントを持っていない場合にIDCSに自己登録できます。

次のソーシャル・プロバイダは、IDCSですぐに利用できます。

*   Facebook
*   Google
*   LinkedIn
*   Microsoft
*   ツイッター

IDCSは、OpenID Connectに準拠している汎用ソーシャル・アイデンティティ・プロバイダもサポートしています。

次のリンクは、GoogleおよびIDCSを使用した構成を示すビデオへのリンクです。画面には日付が設定されていますが、パラメータと概念が役立ちます。

[](youtube:-OwFAGJw3vo)

別のビデオ- より詳細ですが、古いスタイルの画面では:

[](youtube:JU8ArDvzWq0)

推定ラボ時間: 30分

### 目標

この演習では、次のことを行います。

*   Googleでのフェデレーションの構成
*   IDCSでのフェデレーションの構成
*   ソーシャル・ログインの検証

### 前提条件

*   Oracle Free Tierまたは有料アカウント
*   Googleアカウント

## タスク1: Googleの構成

*   _ペルソナ_:
    *   管理者

GoogleサインインをWebアプリケーションに統合するためのクイック・チュートリアルは、この[リンク](https://developers.google.com/identity/sign-in/web/sign-in)にあります。

このガイドでは、GoogleをIDCSのIdPとして統合する方法に関する詳細なチュートリアルも提供します。

GoogleをIDCSのIdPとして使用するには、GoogleからAuth 2.0資格証明を取得する必要があります。これを行うには、googleで開発者アカウントを作成し、この目的のためにアプリケーションを作成します。

1.  開始するには、[Google Identity Platform](https://developers.google.com/identity/protocols/OpenIDConnect)ページの_OpenIDConnectプロトコル・ページ_をクリックしてください。
    
2.  サブヘッダーの_「OAuth 2.0資格証明の取得」_まで下にスクロールし、ハイパーリンクされた_「資格証明」_ページをクリックします。新しいウィンドウが開き、Googleアカウントでログインするように求められます。このワークショップの前提条件セクションで作成したGoogleアカウントに_サインイン_します。 ![イメージ](images/L3001.png)
    
3.  _「プロジェクトの選択」_をクリックし、_「新規プロジェクト」_を選択します。 ![イメージ](images/L3002.png)
    
4.  プロジェクトの名前を選択し、_「作成」_をクリックします。 ![イメージ](images/L3003.png)
    
5.  _「資格証明」_で、_OAuth同意画面_をクリックします。
    
6.  _「アプリケーション名」_を選択します。 ![イメージ](images/L3004.png)
    
7.  _認可されたドメイン_の場合は、_oraclecloud.com_を選択し、_「保存」_をクリックします。 ![イメージ](images/L3005.png)
    
8.  _「資格証明の作成」_をクリックし、_OAuthクライアントID_を選択します。 ![イメージ](images/L3006.png)
    
9.  _「Webアプリケーション」_および_「名前」_を選択します。
    
10.  _「認可されたリダイレクトURL」_を次の値に設定します:
    
        https://<your tenant>/oauth2/v1/social/callback
        
11.  キーを作成するには、_「作成」_をクリックします。 ![イメージ](images/L3007.png)
    
12.  _クライアントID_と_クライアント・シークレット_を受け取ります。後で保存します。 ![イメージ](images/L3008.png)
    

## タスク2: IDCSの構成

*   _ペルソナ_:
    *   管理者

_IDCS_に戻り、GoogleをソーシャルIdPとして構成するためにプロバイダ・パラメータ値を入力します。

1.  IDCS管理コンソールに移動します。左側のサイドバー・メニューから、_「セキュリティ」_タブ、_「アイデンティティ・プロバイダ」_の順に移動します。
    
2.  _「ソーシャルIDPの追加」_をクリックします
    
3.  タイプとして_「Google」_を選択します。プロバイダの名前(Google-<\>など)を入力し、_「次へ」_をクリックします。 ![イメージ](images/L3009.png) 
    
4.  前に取得した_「クライアントID」_および_「クライアント・シークレット」_を入力します。 ![イメージ](images/L3010.png)
    
5.  _「終了」_をクリックします。次に、右側のメニュー・ボタンをクリックし、_「アクティブ化」_を選択して、GoogleをIdPとしてアクティブ化します。 ![イメージ](images/L3011.png)
    
    現在、GoogleはIDCSのソーシャルIDPとして定義されていますが、サインイン・ページには表示されません。次のステップでは、IDCSログイン・ページでGoogleを表示するためにIDPポリシーに割り当てる方法について説明します。
    
6.  IDCSログイン・ページでGoogleをIdPとして表示するには、メニュー・ボタンを再度クリックし、_「ログイン・ページに表示」_オプションを選択します。 ![イメージ](images/L3012.png)
    
    _「ログイン・ページに表示」_に設定すると、「目」が表示されます。
    
    ![イメージ](images/L3013.png)
    
7.  サイドバー・メニューで、_「セキュリティ」_、_「IDPポリシー」_の順にクリックします。_「デフォルトのアイデンティティ・ポリシー」_をクリックします。 ![イメージ](images/L3014.png)
    
8.  _「アイデンティティ・プロバイダ」_タブを選択し、_「割当て」_をクリックして、GoogleをIdPとして割り当てます。 ![イメージ](images/L3015.png)
    
9.  _「Google」_を選択し、_「OK」_をクリックします。 ![イメージ](images/L3016.png)
    
10.  Googleがアイデンティティ・プロバイダのリストに表示されます。Googleは、IDCSのIdPとして構成および割り当てられています。次のステップは、GoogleアカウントをIDCSアカウントにリンクすることです。これを行うには、_「マイ・プロファイル」_をクリックします。 ![イメージ](images/L3017.png)
    
11.  _「マイ・プロファイル」_で、_「ソーシャル・アカウント」_タブを選択します。GmailアカウントをIDCSアカウントにリンクするには、_「ソーシャル・アカウントのリンク」_をクリックします。 ![イメージ](images/L3018.png)
    
12.  _ハンバーガー・メニュー_をクリックし、_「リンク」_をクリックします。 ![イメージ](images/L3019.png)
    
13.  これで、GmailアカウントがIDCSアカウントにリンクされました。IDCSからサイン・アウトするには、_「サイン・アウト」_をクリックします。 ![イメージ](images/L3020.png)
    

## タスク3: ソーシャル・ログインの検証

*   _ペルソナ_:
    *   エンド・ユーザー

_IDCS_に戻り、GoogleをソーシャルIdPとして構成するためにプロバイダ・パラメータ値を入力します。

1.  IDCS管理コンソールに移動します。サインイン方法として_「Google」_をクリックします。 ![イメージ](images/L3021.png)
    
2.  Googleのサインイン・ページがポップアップします。Gmailアドレスとパスワードを入力し、_「次へ」_をクリックします。 ![イメージ](images/L3022.png)
    
3.  Googleは、IDCSの_「自分のアプリケーション」_ページにリダイレクトします。IDCSのIdPとしてのGoogleの統合が正常にテストされました。 ![イメージ](images/L3023.png)
    

次の演習に進むことができます。

## 謝辞

*   **作成者** - SEHubセキュリティおよび管理チーム
*   **最終更新者/日付** - プリンシパル・ソリューション・エンジニア、Lucian Ionescu、15.09.2020