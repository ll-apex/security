# データベース構成の評価

## 概要

セキュリティ評価は、データベース構成のセキュリティの評価に役立ちます。データベース構成、ユーザー・アカウントおよびセキュリティ制御を分析し、リスクを軽減または軽減するためのベスト・プラクティスに従った改善アクティビティの推奨事項とともに結果をレポートします。デフォルトでは、Oracle Data Safeによってターゲット・データベースのセキュリティ評価が自動的に生成され、評価履歴に格納されます。すべてのターゲット・データベースおよび各ターゲット・データベースの評価データを分析できます。最新の評価をベースラインまたは別の評価と比較することで、ターゲット・データベースのセキュリティ・ドリフトを監視できます。

この演習では、セキュリティ評価を確認します。

推定ラボ時間: 20分

### 目標

この演習では、次のことを行います。

*   セキュリティ評価の概要ページの表示
*   ターゲット・データベースの最新のセキュリティ評価の表示
*   ターゲット・データベースのセキュリティ評価の履歴の表示
*   ベースライン・アセスメントの設定
*   ターゲット・データベースでのアクティビティの生成
*   最新のセキュリティ評価を更新し、結果を分析します
*   概要ページから高リスク・レベルの結果を確認します
*   セキュリティ評価の比較レポートの生成
*   毎週日曜日の午後11時30分にターゲット・データベースのセキュリティ評価を保存するスケジュールを追加します
*   すべてのターゲット・データベースのすべてのセキュリティ評価の履歴を表示します

### 前提条件

この演習では、次を想定しています。

*   Oracle Cloudアカウントを取得し、Oracle Cloud Infrastructure Consoleにサインインします。
*   このワークショップのための環境の準備([環境の準備](?lab=prepare-environment)を参照)
*   ターゲット・データベースをOracle Data Safeに登録しました([Autonomous DatabaseのOracle Data Safeへの登録](?lab=register-autonomous-database)を参照)

### 前提

*   実際のデータ値は、スクリーンショットに表示されている値と異なる場合があります。

## タスク1: セキュリティ評価の概要ページの表示

1.  セキュリティ・センターで、**「セキュリティ評価」**をクリックします。
    
2.  **「リスト範囲」**で、コンパートメントを選択します。**「子コンパートメントを含める」**の選択を解除します。
    
    概要ページには、ターゲット・データベースの統計が表示されます。
    
3.  ページ上部で、**「リスク・レベル」**および**「カテゴリ別リスク」**チャートを確認します。
    
    *   **「リスク・レベル」**チャートには、選択したコンパートメント内のすべてのターゲット・データベースにおける様々なリスク・レベル(高、中、低、アドバイザリおよび評価)の割合の内訳が表示されます。
    *   **「カテゴリ別リスク」**チャートには、選択したコンパートメント内のターゲット・データベース間での様々なリスク・カテゴリ(ユーザー・アカウント、権限とロール、認可制御、データ暗号化、ファイングレイン・アクセス、監査およびデータベース構成)の内訳と数の割合が表示されます。
    
    ![すべてのターゲットのカテゴリ別セキュリティ・アセスメント・リスク・レベルおよびリスク・チャート](images/sa_risklevel_risksbycategory.png "すべてのターゲットのカテゴリ別セキュリティ・アセスメント・リスク・レベルおよびリスク・チャート")
    
4.  **「リスクのサマリー」**タブで情報を確認します。
    
    *   **「リスクのサマリー」**タブには、指定したコンパートメント内のすべてのターゲット・データベース全体でどのくらいのリスクがあるかが表示されます。
    *   すべてのターゲット・データベース全体で高、中、低、アドバイザリおよび評価のリスク結果の数を比較し、最大数のリスク・カテゴリを表示できます。
    *   リスク・カテゴリには、ターゲット・データベース、ユーザー・アカウント、権限とロール、認可制御、ファイングレイン・アクセス制御、データ暗号化、監査およびデータベース構成が含まれます。
    
    ![「セキュリティ・アセスメント・リスクのサマリー」タブ](images/sa-risk-summary-tab.png "「セキュリティ・アセスメント・リスクのサマリー」タブ")
    
5.  **「ターゲットのサマリー」**タブをクリックし、情報を確認します。
    
    *   **「ターゲットのサマリー」**タブには、各ターゲット・データベースのセキュリティ状態が表示されます。
    *   各ターゲット・データベースの高、中、低、アドバイザリおよび評価のリスク結果の数を表示できます。
    *   最新の評価日を表示して、最新の評価がベースラインから逸脱しているかどうかを確認できます(設定されている場合)。
    *   各ターゲット・データベースの最新の評価にアクセスできます。
    
    ![セキュリティ評価ターゲットの「サマリー」タブ](images/sa-target-summary-tab.png "セキュリティ評価ターゲットの「サマリー」タブ")
    

## タスク2: ターゲット・データベースの最新のセキュリティ評価の表示

Oracle Data Safeでは、登録時にターゲット・データベースのセキュリティ評価が自動的に作成されます。この評価は_最新評価_と呼ばれます。

1.  **「ターゲットのサマリー」**タブで、ターゲット・データベースを含む行を見つけ、**「レポートの表示」**をクリックします。
    
    ターゲット・データベースの最新のセキュリティ評価が表示されます。ページの上部に**「ターゲット・データベースの最新の評価」**が表示されます。
    
2.  **「アセスメント・サマリー」**タブで表を確認します。
    
    *   この表は、レポート内の各カテゴリの結果数を比較し、リスク・レベル当たりの結果数(**「高リスク」**、**「中リスク」**、**「低リスク」**、**「アドバイザ」**、**「評価」**および**「合格」**)をカウントします。
    *   これらの値は、注意が必要な領域を識別するのに役立ちます。
    
    ![最新セキュリティ・アセスメント・サマリー・タブ](images/latest-sa-assessment-summary-tab.png "最新セキュリティ・アセスメント・サマリー・タブ")
    
3.  セキュリティ評価自体の詳細を表示するには、**「アセスメント情報」**タブをクリックします。
    
    *   詳細には、評価名、OCID、評価が保存されたコンパートメント、ターゲット・データベース名、ターゲット・データベース・バージョン、評価日、スケジュール、ベースライン評価の名前(設定されている場合)、および評価がベースライン評価に準拠しているかどうか(はい、いいえ、またはベースライン・セットなし)が含まれます。
    
    ![「最新のセキュリティ評価情報」タブ](images/latest-sa-assessment-information-tab.png "「最新のセキュリティ評価情報」タブ")
    
4.  最新のセキュリティ評価の名前変更: **「名前」**の右側にある鉛筆アイコンをクリックし、**「最新のセキュリティ評価」**と入力して**「保存」**アイコンをクリックします。
    
    ![最新のセキュリティ評価の名前変更](images/rename-latest-sa-assessment.png "最新のセキュリティ評価の名前変更")
    
5.  スクロール・ダウンして、**「アセスメント詳細」**セクションを表示します。
    
    *   このセクションには、各リスク・カテゴリのすべての結果が表示されます。
    *   リスクは色分けされているため、高いリスク結果(赤)を持つカテゴリを簡単に識別できます。
    *   **「権限およびロール」**にリストされている高リスクの結果は、SQLスクリプトを実行してターゲット・データベースにサンプル・データを移入したときに導入されました。
    
    ![「Latest Security Assessment Details」セクション](images/latest-sa-assessment-details-section.png "「Latest Security Assessment Details」セクション")
    
6.  左側の**「リスク別フィルタ」**で、表示するリスク・レベルを選択できることを確認します。**「パス」**を選択し、**「適用」**をクリックします。
    
    **「評価の詳細」**セクションが更新され、リスクが見つからない結果(**合格**レベル)が含まれます。
    
    ![リスク・レベルのセキュリティ評価フィルタ](images/sa-filters-risk-levels.png "リスク・レベルのセキュリティ評価フィルタ")
    
7.  左側の**「参照別フィルタ」**で、DISA STIG (Security Technical Implementation Guide)、CIS Benchmark (Center for Internet Security)、EU GDPR (European Union's General Data Protection Regulation)およびOracle Best Practicesからの推奨事項に基づいて、結果のリストをフィルタすることもできます。
    
    ![参照によるフィルタ](images/filters-by-references.png "参照によるフィルタ")
    
8.  **「ユーザー・アカウント」**で、**「ユーザー詳細」**を展開します。
    
    *   表には、ターゲット・データベース内の各ユーザーについて、ユーザー・ステータス、使用されるプロファイル、ユーザーのデフォルト表領域、ユーザーがOracle定義済かどうか(はいまたはいいえ)、およびユーザーの認証方法(認証タイプ)が表示されます。
    
    ![セキュリティ・アセスメント・ユーザー詳細](images/sa-user-details.png "セキュリティ・アセスメント・ユーザー詳細")
    
9.  別のカテゴリを展開し、結果を確認します。
    
    *   各結果には、ステータス(リスク・レベル)、結果のサマリー、結果の詳細、リスクの軽減に役立つ備考および参照が表示されます。参照により、推奨されるセキュリティ制御を簡単に識別できます。
    *   次の例では、**強力なロールを持つユーザー**の結果は、**STIG**と**CIS**の2つの参照を持つ高リスクの結果です。
    
    ![強力なロール検索を使用するユーザー](images/users-with-powerful-roles.png "強力なロール検索を使用するユーザー")
    
10.  **「権限とロール」**の下のいくつかのカテゴリを展開し、結果を確認します。
    
11.  さらに下にスクロールし、他のカテゴリを展開します。各カテゴリには、ターゲット・データベースに関する関連結果と、セキュリティを向上させるための変更方法がリストされます。
    

## タスク3: ターゲット・データベースのセキュリティ評価の履歴の表示

1.  ページの上部にある**「履歴の表示」**をクリックします。
    
2.  コンパートメントが選択されていることを確認します。**「子コンパートメントを含める」**の選択を解除します。
    
3.  ターゲット・データベースに対して1つのセキュリティ評価がリストされていることを確認します。これは、最新のセキュリティー評価の_静的_コピー(別個のコピー)です。
    
    ![評価履歴ページ](images/assessment-history.png "評価履歴ページ")
    

## タスク4: ベースライン・アセスメントの設定

ベースライン評価では、特定の時点における選択したコンパートメント内のすべてのターゲット・データベースのデータが表示されます。ただし、コンパートメント内の1つのターゲット・データベースのみを処理しているため、ベースライン評価では1つのターゲット・データベースのデータのみが表示されます。最初のセキュリティ評価をベースラインとして設定します。

1.  ターゲット・データベースの**「評価履歴」**ページを表示している間に、セキュリティ評価の名前をクリックします。セキュリティ・アセスメントの詳細が表示されます。
    
2.  **「ベースラインとして設定」**をクリックします。
    
    **「ベースラインとして設定しますか?」**ダイアログ・ボックスが表示されます。
    
    ![「ベースラインとして設定」ダイアログ・ボックス](images/set-as-baseline-dialog-box.png "「ベースラインとして設定」ダイアログ・ボックス")
    
3.  **「はい」**をクリックして、これらの結果をベースラインとして設定することを確認します。
    
4.  _重要!**「ベースラインが設定されました」**というメッセージが表示されるまで、ページに留まります。_
    
    ![セキュリティ・アセスメント・ベースラインが設定されたメッセージ](images/sa-baseline-has-been-set-message.png "セキュリティ・アセスメント・ベースラインが設定されたメッセージ")
    
5.  **「戻る」**をクリックして**「評価履歴」**ページに戻り、ベースライン評価の表に新しい行があることを確認します。評価名は**SA\_baseline**で始まります。
    
    ![ベースライン・アセスメントによるアセスメント履歴](images/sa-assessment-history-with-baseline.png "ベースライン・アセスメントによるアセスメント履歴")
    
6.  「**Close**」をクリックします。
    
    最新のセキュリティ評価が表示されます。
    

## タスク5: ターゲット・データベースでのアクティビティの生成

このタスクでは、ターゲット・データベースで`GRANT`コマンドを発行して、後で最新のセキュリティ評価をリフレッシュするときに評価を比較できるようにします。

1.  データベース・アクションのSQLワークシートにアクセスします。セッションが期限切れになった場合は、`ADMIN`ユーザーとして再度サインインします。
    
2.  必要に応じて、ワークシートおよび**「スクリプト出力」**タブをクリアします。
    
3.  ワークシートで次のコマンドを入力します。
    
        <copy>grant ALTER ANY ROLE to PUBLIC;</copy>
        
4.  ツールバーで、**「文の実行」**ボタン(緑色の円で白い矢印)をクリックします。
    
    ![「文の実行」ボタン](images/run-statement-button.png "「文の実行」ボタン")
    

## タスク6: 最新のセキュリティ評価のリフレッシュと結果の分析

1.  Oracle Data Safeのブラウザ・タブに戻ります。
    
2.  最新のセキュリティ評価の最上部で、**「今すぐリフレッシュ」**をクリックして最新データを取得します。
    
    **「今すぐリフレッシュ」**パネルが表示されます。
    
3.  **「最新の評価の保存」**ボックスに**My Security Assessment**と入力し、**「今すぐリフレッシュ」**をクリックします。ステータスが**SUCCEEDED**と表示されるのを待ちます。
    
    *   このアクションにより、ターゲット・データベースの最新のセキュリティ評価のデータが更新され、評価のコピー(My Security Assessmentという名前)が評価履歴に保存されます。
    *   リフレッシュ操作には約1分かかります。
    
    ![セキュリティ評価の「今すぐリフレッシュ」パネル](images/sa-refresh-now-panel.png "セキュリティ評価の「今すぐリフレッシュ」パネル")
    
4.  **「アセスメント情報」**タブをクリックします。アセスメント日時が現在で、**「ベースラインに準拠」**が**「いいえ」**であることを確認します。
    
    ![現在評価されているセキュリティ評価](images/sa-assessed-on-right-now.png "現在評価されているセキュリティ評価")
    
5.  下にスクロールし、**「System Privileges Granted to Public」**を展開します。
    
    *   これはリスクの高い発見です。
    *   **「詳細」**セクションで、前のタスクで行った権限が識別されていることを確認できます。
    
    ![PUBLIC検索に付与されたシステム権限](images/system-privileges-granted-to-public.png "PUBLIC検索に付与されたシステム権限")
    

## タスク7: セキュリティ評価の比較レポートの生成

1.  最新のセキュリティ評価が表示された状態で、左側の**「リソース」**で、**「ベースラインとの比較」**をクリックします。Oracle Data Safeでは、比較の処理が自動的に開始されます。
    
    最新のセキュリティ評価から移動した場合は、ブレッドクラムで**「セキュリティ評価」**をクリックして戻ることができます。**「ターゲットのサマリー」**タブをクリックします。ターゲット・データベースの**「レポートの表示」**をクリックします。
    
    ![「リソース」の「ベースラインと比較」オプション](images/sa-resources-compare-with-baseline-option.png "「リソース」の「ベースラインと比較」オプション")
    
2.  比較操作が完了したら、**「ベースラインとの比較」**セクションまでページをスクロール・ダウンし、情報を確認します。
    
    *   各リスク・レベルのリスク・カテゴリ当たりの結果数を確認します。カテゴリには、**「ユーザー・アカウント」**、**「権限およびロール」**、**「認可制御」**、**「データ暗号化」**、**「ファイングレイン・アクセス制御」**、**「監査」**および**「データベース構成」**があります。
    *   **「変更済」**という語を含むセルを表示することで、ターゲット・データベースで変更が発生した場所を識別できます。この数は、ターゲット・データベースの新規、是正済および修正済リスクの合計数を表します。
    *   詳細表では、各結果のリスク・レベル、結果が属するカテゴリ、結果名、およびターゲット・データベースで変更された内容の説明を表示できます。「比較レポート」列は、ベースライン・レポートの生成後にターゲット・データベースに対して変更、追加または削除された内容を説明するため、重要です。
    *   一部の結果については、**`PUBLIC: [ALTER ANY ROLE]` Modification Details(added)**のノートを参照してください。マスキング・ロールを`DS$ADMIN`に付与することによって導入された変更も含まれます。
    
    ![セキュリティ評価比較レポート・トップ](images/sa-comparison-report-top.png "セキュリティ評価比較レポート・トップ") ![セキュリティ評価比較レポート下部](images/sa-comparison-report-bottom.png "セキュリティ評価比較レポート下部")
    

## タスク8: 概要ページからの高リスク・レベルの結果の確認

1.  ページ上部のブレッドクラムで、**「セキュリティ評価」**をクリックして概要ページに戻ります。コンパートメントが選択されていることを確認します。**「子コンパートメントを含める」**の選択を解除します。
    
2.  **「リスク・レベル」**列で、**「高」**をクリックしてすべての高リスク結果を表示します。
    
    ![セキュリティ・アセスメント高リスク・リンク](images/sa-high-risk-link.png "セキュリティ・アセスメント高リスク・リンク")
    
3.  **「概要」**タブで、**「カテゴリ別リスク」**チャートを確認します。パーセント値にカーソルを置くと、カテゴリ名と件数を表示できます。
    
    ![すべてのターゲット・データベースのセキュリティ評価高リスク結果](images/sa-high-risk-findings-all-targets.png "すべてのターゲット・データベースのセキュリティ評価高リスク結果")
    
4.  **「リスクの詳細」**セクションで、**「PUBLICに付与されたシステム権限」**を展開します。
    
    *   **「備考」**セクションでは、リスクとその軽減方法について説明します。
    *   **「ターゲット・データベース」**セクションには、高リスクが適用されるターゲット・データベースがリストされます。ターゲット・データベースがリストされていることを確認します。
    
    ![パブリックに付与されたセキュリティ評価システム権限](images/sa-system-privileges-granted-to-public.png "パブリックに付与されたセキュリティ評価システム権限")
    
5.  ターゲット・データベース名をクリックして、ターゲット・データベースの結果の詳細を表示します。
    
    *   結果には、ターゲット・データベース名、リスク・レベル、リスクに関するサマリー、ターゲット・データベースの詳細、リスクを説明する備考、リスクの軽減に役立つ備考および参照が含まれます。
    *   **「サマリー」**セクションには、`PUBLIC`への権限付与の数が表示されます。
    *   **「詳細」**セクションで、**`PUBLIC`**に**`ALTER ANY ROLE`**権限(タスク5で行った権限)があることがわかります。
    *   The **Remarks** section says **Privileges granted to PUBLIC are available to all users. This generally should include few, if any, system privileges since these will not be needed by ordinary users who are not administrators.**
    *   **「参照」**セクションでは、セキュリティ技術情報ガイド(STIG)のルール番号(**RULE SV-75925R1**)を示します。
    
    ![PUBLIC詳細に付与されたセキュリティ評価システム権限](images/sa-system-privileges-granted-to-public-details.png "PUBLIC詳細に付与されたセキュリティ評価システム権限")
    
6.  ターゲット・データベースの最新の評価を表示するには、ページの下部までスクロールし、**「ここをクリック」**リンクをクリックします。最新のセキュリティ評価に戻ります。
    
    ![最新のセキュリティ評価を表示するには、ここをクリックしてください](images/sa-click-here-link.png "最新のセキュリティ評価を表示するには、ここをクリックしてください")
    

## タスク9: 毎週日曜日の午後11時30分にターゲット・データベースのセキュリティ評価を保存するスケジュールの追加

1.  ページ上部のブレッドクラムで、**「セキュリティ評価」**をクリックします。
    
2.  左側の**「関連リソース」**で、**「スケジュール」**をクリックします。
    
    **「スケジュール」**ページが表示されます。
    
3.  表に、スケジュールがすでに存在していることを確認します。タイプは最新です。これは、ターゲット・データベースでセキュリティ評価ジョブを週に1回自動的に実行するデフォルトのスケジュールです。更新して名前を変更することはできますが、削除できません。
    
    ![セキュリティ評価のデフォルト・スケジュール](images/sa-default-schedule.png "セキュリティ評価のデフォルト・スケジュール")
    
4.  **「スケジュールの追加」**をクリックします。
    
    **「アセスメントを保存するスケジュールの追加」**パネルが表示されます。
    
5.  ページの上部に表示されるコンパートメントが自分のコンパートメントでない場合は、**「コンパートメントの変更」**をクリックし、コンパートメントを選択します。
    
6.  **「ターゲット・データベース」**ドロップダウン・リストから、ターゲット・データベースを選択します。
    
7.  **「スケジュール名」**ボックスに、**Sunday Security Assessment**と入力します。
    
8.  **「評価を保存するコンパートメント」**ドロップダウン・リストから、コンパートメントを選択します。
    
9.  **「スケジュール・タイプ」**ドロップダウン・リストから、**「週次」**を選択します。
    
10.  **「毎」**ドロップダウン・リストから**「日曜日」**を選択します。
    
11.  **「時間」**ボックスをクリックし、下にスクロールして**「11:30 PM」**を選択します。手動で時間を入力することもできます。
    
12.  **「スケジュールの追加」**をクリックします。
    
    ![Add Schedule to Save Assessmentsページ](images/sa-add-schedule-to-save-an-assessment.png "Add Schedule to Save Assessmentsページ")
    
    **「スケジュールの詳細」**ページが表示されます。
    
13.  スケジュールが作成されると、そのステータスが**「SUCCEEDED」**に変わります。スケジュール・タイプは**SAVED**です。
    
    ![スケジュールの詳細ページ](images/sa-schedule-details-page.png "スケジュールの詳細ページ")
    

## タスク10: すべてのターゲット・データベースのすべてのセキュリティ評価の履歴の表示

1.  ページ上部のブレッドクラムで、**「セキュリティ評価」**をクリックします。
    
2.  **「関連リソース」**で、**「評価履歴」**をクリックします。
    
3.  左側の**「リスト範囲」**で、コンパートメントを選択します。オプションで、**「子コンパートメントを含める」**の選択を解除します。
    
4.  セキュリティ評価のリストを表示します。
    
    *   表には、ターゲット・データベース名、アセスメント名、アセスメントがベースライン・アセスメントであるかどうか、アセスメントが作成された日時、アセスメントの状態(成功など)、および高、中、低、アドバイザリおよび評価リスク結果の数が表示されます。
    *   アセスメント名をクリックすると表示できます。
    *   **「最新評価に名前を付けて保存」**をクリックして、選択したターゲット・データベースの最新評価のコピーを作成できます。
    
    ![評価履歴ページ](images/sa-assessment-history-page.png "評価履歴ページ")
    

**次の演習に進む**ことができます。

## さらに学ぶ

*   [セキュリティ評価の概要](https://www.oracle.com/pls/topic/lookup?ctx=en/cloud/paas/data-safe&id=UDSCS-GUID-030B2A14-272F-49CF-80D2-5559C722E0FF)

## 確認

*   **著者** - データベース開発、コンサルティング・ユーザー・アシスタンス開発者、Jody Glover
*   **最終更新者/日付** - Jody Glover、2023年6月8日