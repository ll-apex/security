# データベース・ユーザーの評価

## 概要

ユーザー評価は、データベース・ユーザーのセキュリティを評価し、潜在的な高リスク・ユーザーを識別するのに役立ちます。デフォルトでは、Oracle Data Safeによってターゲット・データベースのユーザー評価が自動的に生成され、評価履歴に格納されます。すべてのターゲット・データベースおよび各ターゲット・データベースの評価データを分析できます。最新の評価をベースラインまたは別の評価と比較することで、ターゲット・データベースのセキュリティ・ドリフトを監視できます。

この演習では、ユーザー評価を確認します。

見積時間: 20分

### 目標

この演習では、次のことを行います。

*   ユーザー・アセスメントの概要ページの表示
*   最新のユーザー評価でのユーザーの分析
*   ターゲット・データベースのユーザーおよび権限の変更
*   最新のユーザー評価のリフレッシュ
*   ターゲット・データベースのユーザー評価履歴の表示
*   最新ユーザー評価と初期ユーザー評価との比較

### 前提条件

この演習では、次を想定しています。

*   Oracle Cloudアカウントを取得し、Oracle Cloud Infrastructure Consoleにサインインします。
*   このワークショップのための環境の準備
*   Oracle Data Safeへのターゲット・データベースの登録

### 前提条件

*   実際のデータ値は、多くの場合、スクリーンショットに表示されている値とは異なります。

ラボのクイック・ウォークスルーについては、次のビデオをご覧ください。[データベース・ユーザーの評価](videohub:1_fvykqng1)

## タスク1: ユーザー・アセスメントの概要ページの表示

1.  **「ユーザー評価」**にナビゲートします。これを行うには、ページ上部のブレッドクラムで、**「セキュリティ・センター」**をクリックします。左側の**「ユーザー評価」**をクリックします。
    
2.  **「リスト範囲」**で、コンパートメントが選択されていることを確認します。**「子コンパートメントを含める」**の選択を解除します。
    
3.  概要ページの上部で、4つのチャートを確認します。
    
    *   **「Potential User Risk」**チャートには、**「Critical Risk」**、**「High Risk」**、**「Medium Risk」**および**「Low Risk」**の可能性があるユーザーの数と割合が表示されます。
    *   **「ユーザー・ロール」**チャートには、**DBA**、**DV管理**および**監査管理**の各ロールを持つユーザーの数が表示されます。
    *   **「最終パスワード変更」**チャートには、過去30日間、過去30-90日間および90日以上前にパスワードを変更したユーザーの数が表示されます。
    *   **「最終ログイン」**チャートには、過去24時間、過去1週間、今月、今年および1年以上前にターゲット・データベースにサインインしたユーザーの数が表示されます。
    
    ![ユーザー評価の概要ページ(最初の3つのチャート)](images/ocw/ua-dashboard-charts1.png "ユーザー評価の概要ページ(最初の3つのチャート)")
    
    ![ユーザー評価概要ページ最終チャート](images/ocw/ua-dashboard-charts2.png "ユーザー評価概要ページ最終チャート")
    
4.  **「リスクのサマリー」**タブを確認します。
    
    *   **「リスク・サマリー」**タブは、選択したすべてのターゲット・データベースにおける潜在的なリスクに重点を置いています。潜在的なリスク・レベル、ターゲット・データベースの数、各リスク・レベルのユーザーの合計数、各リスク・レベルの特権ユーザーの合計数、DBA、DV管理者および監査管理者の数が表示されます。
    *   潜在的なリスク・レベルは、**「クリティカル」**、**「高」**、**「中」**および**「低」**に分類されます。
    
    ![ユーザー・アセスメント・リスクの「サマリー」タブ](images/ocw/ua-risk-summary-tab.png "ユーザー・アセスメント・リスクの「サマリー」タブ")
    
5.  **「ターゲットのサマリー」**タブをクリックします。このタブには、次の情報が表示されます:
    
    *   クリティカルおよび高リスクのユーザー数、DBA、DV管理者および監査管理者
    *   最新のユーザー評価の日時
    *   最新のユーザー評価がベースラインから逸脱しているかどうか(設定されている場合)
    
    ![ユーザー・アセスメント・ターゲットの「サマリー」タブ](images/ocw/ua-target-summary-tab.png "ユーザー・アセスメント・ターゲットの「サマリー」タブ")
    

## タスク2: 最新のユーザー評価でのユーザーの分析

最新のユーザー評価は、ターゲット・データベースを登録したときにOracle Data Safeによって自動的に生成された評価です。

1.  **「ターゲットのサマリー」**タブで、**「レポートの表示」**をクリックして、ターゲット・データベースの最新のユーザー評価を表示します。
    
2.  **「概要」**タブのレポートの上部で、**「潜在的なユーザー・リスク」**、**「ユーザー・ロール」**、**「最終パスワード変更」**および**「最終ログイン」**チャートを確認します。
    
    ![ユーザー評価最新チャート](images/ocw/ua-latest-charts1.png "ユーザー評価最新チャート")
    
    ![ユーザー評価最新チャート](images/ocw/ua-latest-charts2.png "ユーザー評価最新チャート")
    
3.  **「アセスメント情報」**タブをクリックし、詳細を確認します。
    
    ![「アセスメント情報」タブ](images/ocw/ua-assessment-information-tab.png "「アセスメント情報」タブ")
    
4.  下にスクロールして、**「ユーザー詳細」**セクションを確認します。この表は、各ユーザーに関する次の情報を示しています。
    
    *   ユーザー名
    *   ユーザー・タイプ(PRIVILEGED、SCHEMAなど)
    *   ユーザーがDBA、DV管理または監査管理であるかどうか
    *   潜在的なリスク・レベル(LOW、HIGH、CRITICALなど)
    *   ユーザーのステータス(OPEN、LOCKED、EXPIRED\_AND\_LOCKEDなど)
    *   ユーザーがターゲット・データベースに前回ログインした日時
    *   ユーザー・プロファイル
    *   ユーザーの監査レコード
    
    ![ユーザー・アセスメント最新アセスメント詳細](images/ocw/ua-latest-assessment-details.png "ユーザー・アセスメント最新アセスメント詳細")
    
5.  **「User Name」**列で、**CRITICAL**の潜在的なリスクであるユーザー(**EVIL\_RICH**など)をクリックします。
    
    **「ユーザーの詳細」**パネルには、ユーザーに関する次の情報が表示されます。
    
    *   ターゲット・データベース名
    *   ユーザー名
    *   ユーザー・プロファイル
    *   ユーザー・タイプ(PRIVILEGEDなど)
    *   ステータス(OPENなど)
    *   潜在的なリスク(CRITICALなど) - **i**にマウスポインタを重ねると、重要なリスクユーザーの構成要素が表示されます。
    *   最終ログイン日時
    *   ユーザーの作成日時
    *   パスワードが変更された日時
    *   特権ロール(ユーザーに付与されている管理ロール)
    *   ロール: **「すべてのロール」**を展開して、ユーザーに付与されているすべてのロールを表示します。
    *   権限: **「すべての権限」**を展開して、ユーザーに付与されているすべての権限を表示します。
    
    ![ADMINユーザー詳細](images/ocw/ua-admin-user-details.png "ADMINユーザー詳細")
    
6.  「**Close**」をクリックします。
    
7.  潜在的にクリティカルなリスク・ユーザーのみを表示するようにレポートをフィルタするには、**「概要」**タブをクリックします。**「潜在的なユーザー・リスク」**チャートで、チャートの**「クリティカル」**セクションをクリックします。フィルタが自動的に作成されます。
    
    ![クリティカル・リスク・ユーザー・フィルタ](images/ocw/ua-critical-risk-users-filter.png "クリティカル・リスク・ユーザー・フィルタ")
    
8.  フィルタを削除するには、フィルタの横にある**「X」**をクリックします。
    

## タスク3: ターゲット・データベースでのユーザーおよび権限の変更

1.  **「データベース・アクション」**でSQLワークシートにアクセスします。
    
2.  必要に応じて、ワークシートおよび**「スクリプト出力」**タブをクリアします。
    
3.  SQLワークシートで、次のコマンドを入力します。
    
        <copy>DROP USER evil_rich;
        CREATE USER joe_smith identified by Oracle123_Oracle123;
        GRANT PDB_DBA to joe_smith;</copy>
        
4.  ツールバーで、**「スクリプトの実行」**ボタン(白い矢印付きの緑の円)をクリックして問合せを実行します。
    
    ![「スクリプトの実行」ボタン](images/run-script.png "「スクリプトの実行」ボタン")
    
5.  ページ下部の**「スクリプト出力」**タブで、`EVIL_RICH`ユーザーが削除され、`JOE_SMITH`ユーザーが作成され、付与が成功したことを確認します。
    

## タスク4: 最新のユーザー評価のリフレッシュ

1.  Oracle Data Safeのブラウザ・タブに戻ります。最後に、最新のユーザー評価の**「ユーザー評価の詳細」**ページで中断しました。
    
2.  **「即時リフレッシュ」**ボタンをクリックします。
    
    **「今すぐリフレッシュ」**パネルが表示されます。
    
3.  デフォルト名をそのままにして、**「今すぐリフレッシュ」**をクリックします。最新のユーザー評価のステータスが**SUCCEEDED**と表示されるのを待ちます。Oracle Data Safeでは、評価の静的コピーが評価履歴に自動的に保存されます。
    
    ![ユーザー評価の「今すぐリフレッシュ」パネル](images/ocw/ua-refresh-now-panel.png "ユーザー評価の「今すぐリフレッシュ」パネル")
    
4.  リフレッシュされた最新の評価をレビューします。
    

## タスク5: 最新のユーザー評価と初期ユーザー評価の比較

ユーザー評価を選択して、最新のユーザー評価と比較できます。このオプションでは、ベースラインを設定する必要はありません。このオプションは、最新のユーザー評価を表示している場合にのみ使用できます。ベースラインを設定し、最新の評価と比較できます。

1.  最新のユーザー評価を表示しているときに、左側の**「リソース」**で、**「評価の比較」**をクリックします。
    
2.  **「他のアセスメントとの比較」**セクションまでスクロール・ダウンします。
    
3.  コンパートメントが表示されない場合は、**「コンパートメントの変更」**をクリックしてコンパートメントを選択します。
    
4.  **「評価の選択」**ドロップダウン・リストから、ターゲット・データベースの初期評価(リストの2番目の評価)を選択します。これを選択すると、比較操作が開始されます。
    
5.  結果をレビューします。
    
    *   新規ユーザーが追加され、ユーザーが削除されました。
    *   「新規ユーザー」の結果は、潜在的な **CRITICIAL**リスクとして識別されます。
    
    ![ユーザー評価比較レポート](images/ocw/ua-comparison-report2.png "ユーザー評価比較レポート")
    
6.  **「比較結果」**列で、**「詳細を開く」**リンクのいずれかをクリックして詳細情報を表示します。
    
    **「比較の詳細」**パネルが表示されます。
    
    ![「比較詳細」パネル](images/ocw/ua-comparison-details-panel.png "「比較詳細」パネル")
    
7.  情報を確認し、**「閉じる」**をクリックします。この時点で、ベースライン評価の設定を検討できます。
    

## さらに学ぶ

*   [ユーザー評価の概要](https://www.oracle.com/pls/topic/lookup?ctx=en/cloud/paas/data-safe&id=UDSCS-GUID-6BF46EE2-F7B5-4710-A09C-069EA95F8052)

## 確認

*   **著者** - データベース開発、コンサルティング・ユーザー・アシスタンス開発者、Jody Glover
*   **最終更新者/日付** - Jody Glover、2023年8月17日